
# 开发方案审查

> 对 dev 流程产出的文档进行深度技术审查

## 任务

作为高级技术审查员，对开发方案（requirements/design/tasks）进行全面审查，识别潜在问题、遗漏考虑和更优方案。

## 审查范围

根据参数选择审查范围：

| 参数 | 审查内容 |
|------|----------|
| （无参数） | 全量审查：requirements + design + tasks |
| `--requirements` | 仅审查需求文档 |
| `--design` | 仅审查技术设计 |
| `--tasks` | 仅审查任务规划 |

## 执行步骤

### 1. 定位文档

查找 `docs/dev/{feature_name}/` 目录下的：
- `{feature_name}-requirements.md` - 需求文档
- `{feature_name}-design.md` - 技术设计
- `{feature_name}-tasks.md` - 任务规划
- `{feature_name}-context.md` - 上下文记录

### 2. 深度分析

#### 需求审查（Requirements Review）

- **完整性**：需求是否覆盖所有场景？边界条件是否明确？
- **可测试性**：验收标准是否可量化、可验证？
- **一致性**：需求之间是否存在冲突？
- **可行性**：技术上是否可实现？资源是否充足？

#### 设计审查（Design Review）

- **架构兼容性**：与现有系统的集成是否合理？
- **数据库影响**：Schema 变更、迁移策略、索引优化
- **依赖分析**：版本兼容性、废弃 API、已知问题
- **安全评估**：认证授权、数据保护、注入风险
- **性能考量**：瓶颈识别、缓存策略、扩展性
- **备选方案**：是否有更简单或更健壮的方案？

#### 任务审查（Tasks Review）

- **拆分合理性**：粒度是否合适？依赖关系是否正确？
- **TDD 覆盖**：测试计划是否充分？
- **回滚策略**：每个任务是否有回退方案？
- **风险识别**：高风险任务是否有应对措施？

### 3. 生成审查报告

输出格式：

```markdown
# 开发方案审查报告

**审查范围**: {feature_name}
**审查时间**: {YYYY-MM-DD HH:MM}
**审查级别**: 全量 / 需求 / 设计 / 任务


## 执行摘要

**整体评估**: ✅ 可实施 / ⚠️ 需修改后实施 / ❌ 建议重新设计

**主要发现**:
- [1-3 句话总结]


## 🔴 关键问题（必须解决）

### 问题 1: [问题标题]
- **位置**: `{feature_name}-design.md` 第 XX 节
- **问题描述**: [详细说明]
- **影响**: [可能导致的后果]
- **建议**: [具体修复方案]


## 🟡 改进建议（建议处理）

### 建议 1: [建议标题]
- **位置**: `{feature_name}-requirements.md` 第 XX 节
- **现状**: [当前方案]
- **建议**: [改进方案]
- **收益**: [预期收益]


## 🟢 亮点确认

- [方案中做得好的地方]


## 备选方案评估

| 方案 | 优点 | 缺点 | 推荐度 |
|------|------|------|--------|
| 当前方案 | ... | ... | ⭐⭐⭐ |
| 方案 B | ... | ... | ⭐⭐ |


## 风险清单

| 风险 | 概率 | 影响 | 缓解措施 |
|------|------|------|----------|
| ... | 高/中/低 | 高/中/低 | ... |


## 下一步行动

1. [ ] [具体行动项]
2. [ ] [具体行动项]


**审查结论**: [最终建议]
```

## 审查原则

### 务实审查
- 只标记真正的问题，不制造问题
- 提供具体、可操作的建议
- 考虑项目实际约束（时间、资源、技术栈）

### 关注重点
- **阻塞性问题**：会导致实施失败的关键缺陷
- **遗漏考虑**：未覆盖的边界条件、错误处理、回滚方案
- **更优方案**：更简单、更健壮、更易维护的替代方案

### 不做的事
- 不重复现有文档内容
- 不做理论化的完美主义建议
- 不脱离项目上下文空谈

## 示例

```
/dev-review workflow-engine
# 全量审查 workflow-engine 功能的所有文档

/dev-review --design
# 仅审查当前目录下最近的设计文档

/dev-review --tasks user-auth
# 仅审查 user-auth 功能的任务规划
```

## 与 dev 流程的集成

推荐在阶段 3 完成后、开始实施前执行审查：

```text
阶段 1 → 阶段 2 → 阶段 3 → /dev-review → 实施
```

对于复杂功能（跨模块/数据库迁移/外部集成），强烈建议执行全量审查。


------

**最后更新**: 2025-11-29
**维护者**: Development Team
**版本**: 1.0.0
