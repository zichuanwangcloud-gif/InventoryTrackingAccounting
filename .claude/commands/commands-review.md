---
allowed-tools: Bash, Read, Write, Edit, Grep, Glob, AskUserQuestion, TodoWrite
description: Audit command documentation quality in .ai-config/commands/
argument-hint: [--file <filename>] [--format <format>] [--output <path>]
---

# 命令文档审计

> 审计 `.ai-config/commands/` 目录下的命令文档质量

## 使用方式

### Claude Code
在 Claude Code 中通过命令面板（`Cmd+Shift+P` / `Ctrl+Shift+P`）或快捷键调用此命令。

### Claude Code
在 Claude Code 中通过斜杠命令 `/commands-review` 或参数提示调用此命令。

---

## 概述

### 目的

作为文档质量审计工具，对 `.ai-config/commands/` 目录下的所有命令文档进行全面质量审计，识别结构、内容、格式、一致性和可维护性方面的问题，并提供详细的改进建议。

### 适用场景

- **定期质量检查**：定期审计所有命令文档，确保文档质量达标
- **新文档审查**：新创建的命令文档需要经过审计确认
- **文档重构前**：在重构文档前了解当前文档状态
- **发布前检查**：确保所有命令文档符合发布标准

### 审计输出

审计报告将输出到：`docs/audit/commands-audit-{YYYYMMDD-HHMMSS}.md`

---

## 快速开始

### 最简使用

```bash
# 审计所有命令文档
/commands-review

# 仅审计指定文档
/commands-review --file dev.md

# 生成 JSON 格式报告
/commands-review --format json
```

### 完整工作流

```text
扫描文档 → 分析质量 → 生成报告 → 提供改进建议
```

---

## 功能

AI 将帮助你：

1. **结构完整性检查**：检查命令文档是否包含必要的结构元素
2. **内容质量评估**：评估文档内容的清晰度、完整性和可执行性
3. **格式规范检查**：检查 Markdown 格式、代码块、表格等格式规范
4. **一致性检查**：检查与其他命令文档的风格是否一致
5. **可维护性检查**：检查是否有最后更新时间、版本号等维护信息
6. **生成审计报告**：生成详细的审计报告和改进建议

## 任务

扫描 `.ai-config/commands/` 目录下的所有命令文档，对每个文档进行全面质量审计，识别问题并提供改进建议。

---

## 审计维度

### 1. 结构完整性（Structure Completeness）

检查文档是否包含以下必要部分：

| 必需元素 | 检查项 | 权重 |
|---------|--------|------|
| **标题** | 是否有清晰的 `# 标题` | 高 |
| **描述** | 是否有简短的功能描述（通常在标题后） | 高 |
| **使用方式** | 是否说明如何在 Claude Code/Claude Code 中使用 | 高 |
| **功能描述** | 是否有详细的功能说明 | 中 |
| **执行步骤** | 是否有清晰的执行步骤或工作流 | 高 |
| **参数说明** | 如果有参数，是否有详细说明 | 中 |
| **示例** | 是否有使用示例 | 中 |
| **相关命令** | 是否列出相关命令 | 低 |
| **维护信息** | 是否有最后更新时间、版本号、维护者 | 低 |

### 2. 内容质量（Content Quality）

评估文档内容的质量：

| 评估项 | 检查标准 | 权重 |
|--------|---------|------|
| **清晰度** | 描述是否清晰易懂，无歧义 | 高 |
| **完整性** | 是否覆盖所有必要信息 | 高 |
| **可执行性** | 步骤是否可执行，命令是否有效 | 高 |
| **准确性** | 信息是否准确，无过时内容 | 中 |
| **实用性** | 是否提供实用的示例和场景 | 中 |
| **结构化** | 内容组织是否合理，层次清晰 | 中 |

### 3. 格式规范（Format Standards）

检查 Markdown 格式规范：

| 检查项 | 标准 | 权重 |
|--------|------|------|
| **标题层级** | 标题层级是否合理（不超过 6 级） | 中 |
| **代码块** | 代码块是否有语言标识，格式正确 | 高 |
| **表格** | 表格格式是否正确，对齐良好 | 中 |
| **列表** | 列表格式是否正确（有序/无序） | 中 |
| **链接** | 链接格式是否正确，链接有效 | 低 |
| **分隔线** | 使用 `---` 分隔主要章节 | 低 |
| **引用块** | 引用块格式是否正确 | 低 |

### 4. 一致性（Consistency）

检查与其他命令文档的一致性：

| 检查项 | 标准 | 权重 |
|--------|------|------|
| **风格一致** | 与其他命令文档的风格是否一致 | 中 |
| **术语一致** | 术语使用是否与其他文档一致 | 中 |
| **结构一致** | 文档结构是否与其他文档相似 | 低 |
| **格式一致** | 格式规范是否与其他文档一致 | 低 |

### 5. 可维护性（Maintainability）

检查文档的可维护性：

| 检查项 | 标准 | 权重 |
|--------|------|------|
| **最后更新** | 是否有最后更新时间 | 中 |
| **版本号** | 是否有版本号 | 低 |
| **维护者** | 是否有维护者信息 | 低 |
| **变更历史** | 是否有变更历史（可选） | 低 |

---

## 执行步骤

### 1. 扫描命令文档

扫描 `.ai-config/commands/` 目录下的所有 `.md` 文件：

```bash
find .ai-config/commands -name "*.md" -type f ! -name "README.md" | sort
```

**排除项**：
- `README.md`（如果存在）
- 临时文件或备份文件（如 `*.bak`、`*.tmp`）

### 2. 分析每个文档

对每个命令文档执行以下检查：

#### 2.1 结构完整性检查

检查文档是否包含以下必需元素：

- [ ] **标题**：是否有清晰的 `# 标题`
- [ ] **描述**：是否有简短的功能描述（通常在标题后使用 `>` 引用块）
- [ ] **使用方式**：是否说明如何在 Claude Code/Claude Code 中使用
- [ ] **功能描述**：是否有详细的功能说明
- [ ] **执行步骤**：是否有清晰的执行步骤或工作流
- [ ] **参数说明**：如果有参数，是否有详细说明
- [ ] **示例**：是否有使用示例
- [ ] **相关命令**：是否列出相关命令
- [ ] **维护信息**：是否有最后更新时间、版本号、维护者

#### 2.2 内容质量评估

**清晰度检查**：
- 标题是否清晰描述命令功能
- 描述是否简洁明了，无歧义
- 是否有模糊或容易误解的表述

**完整性检查**：
- 是否包含必要的使用说明
- 是否包含必要的执行步骤
- 是否包含必要的参数说明（如果有参数）
- 是否覆盖所有主要功能点

**可执行性检查**：
- 代码块中的命令是否可执行
- 步骤是否清晰可操作
- 示例是否完整可用
- 命令路径和参数是否正确

**准确性检查**：
- 检查是否有过时信息
- 检查命令路径是否正确
- 检查示例是否仍然有效
- 检查引用的其他文档是否存在

#### 2.3 格式规范检查

**Markdown 格式**：
- 标题层级是否合理（建议不超过 4 级）
- 代码块是否有语言标识（如 `bash`、`python`、`markdown`）
- 表格格式是否正确，对齐良好
- 列表格式是否正确（有序/无序）
- 链接格式是否正确，链接有效
- 是否使用 `---` 分隔主要章节

**代码块格式要求**：
- 正确：使用语言标识，如 ` ```bash `、` ```python `
- 错误：缺少语言标识的代码块

**表格格式要求**：
- 正确：使用管道符对齐，如 `| 列1 | 列2 |`
- 错误：对齐不正确或缺少分隔符

#### 2.4 一致性检查

**风格一致性**：
- 与其他命令文档的标题风格是否一致
- 描述格式是否一致（使用 `>` 引用块）
- 章节组织方式是否一致

**术语一致性**：
- 术语使用是否与其他文档一致
- 命令引用格式是否一致（如 `/command-name`）
- 参数格式是否统一

**结构一致性**：
- 文档结构是否与其他文档相似
- 章节顺序是否合理（使用方式 → 概述 → 功能 → 执行步骤 → 参数 → 示例）

#### 2.5 可维护性检查

**维护信息**：
- 是否有最后更新时间（格式：`YYYY-MM-DD` 或 `YYYY-MM-DD HH:MM`）
- 是否有版本号（格式：`X.Y.Z`）
- 是否有维护者信息

**更新频率**：
- 检查文件最后修改时间
- 如果超过 90 天未更新，标记为"可能需要更新"
- 检查文档内容是否与当前项目状态一致

---

### 3. 生成审计报告

生成详细的审计报告，包含总体概览、详细问题清单、改进优先级和最佳实践建议。

**报告结构**：

1. **总体概览**：审计时间、范围、文档总数、通过率、总体评分表
2. **详细问题清单**：每个文档的优点、严重问题、改进建议、轻微问题
3. **改进优先级**：按优先级分类的问题列表
4. **最佳实践建议**：文档结构模板、内容质量建议、格式规范建议

**报告输出位置**：
- 默认：`docs/audit/commands-audit-{YYYYMMDD-HHMMSS}.md`
- 可指定：使用 `--output` 参数指定路径

### 4. 输出审计报告

将审计报告保存到文件：

```bash
# 默认输出路径
docs/audit/commands-audit-{YYYYMMDD-HHMMSS}.md

# 或指定路径
--output docs/audit/commands-audit-report.md
```

---

## 参数

### 基本参数

- `--all`: 审计所有命令文档（默认）
- `--file <filename>`: 仅审计指定的命令文档
- `--output <path>`: 指定审计报告输出路径
- `--format <format>`: 指定报告格式（markdown/json，默认 markdown）

### 过滤参数

- `--min-score <score>`: 仅显示评分低于指定分数的文档（0-100）
- `--severity <level>`: 仅显示指定严重程度的问题（critical/warning/info，默认 all）
- `--exclude <pattern>`: 排除匹配的文件

### 操作参数

- `--fix`: 自动修复可修复的问题（如格式问题）
- `--dry-run`: 仅预览，不生成报告
- `--verbose`: 显示详细输出

## 评分标准

### 结构完整性（40 分）

- 标题：5 分
- 描述：5 分
- 使用方式：10 分
- 功能描述：5 分
- 执行步骤：10 分
- 参数说明：3 分（如有参数）
- 示例：2 分

### 内容质量（30 分）

- 清晰度：10 分
- 完整性：10 分
- 可执行性：10 分

### 格式规范（15 分）

- Markdown 格式：5 分
- 代码块格式：5 分
- 表格格式：3 分
- 其他格式：2 分

### 一致性（10 分）

- 风格一致性：5 分
- 术语一致性：3 分
- 结构一致性：2 分

### 可维护性（5 分）

- 最后更新时间：3 分
- 版本号：1 分
- 维护者：1 分

### 总分计算

```
```text
总分 = 结构完整性 × 0.4 + 内容质量 × 0.3 + 格式规范 × 0.15 + 一致性 × 0.1 + 可维护性 × 0.05
```

### 等级划分

- **优秀**（90-100 分）：文档质量优秀，无需改进
- **良好**（80-89 分）：文档质量良好，有少量改进空间
- **合格**（70-79 分）：文档质量合格，建议改进
- **需改进**（60-69 分）：文档质量需要改进
- **不合格**（<60 分）：文档质量不合格，需要重大改进

---

## 示例

### 基本使用

```bash
# 审计所有命令文档
/commands-review

# 仅审计指定文档
/commands-review --file dev.md

# 生成 JSON 格式报告
/commands-review --format json --output audit-report.json

# 仅显示评分低于 70 分的文档
/commands-review --min-score 70
```

### 高级使用

```bash
# 自动修复可修复的问题
/commands-review --fix

# 仅显示严重问题
/commands-review --severity critical

# 预览模式（不生成报告）
/commands-review --dry-run

# 详细输出
/commands-review --verbose
```

---

## 审计报告示例

审计报告包含以下部分：

1. **总体概览**：审计统计信息和总体评分表
2. **详细问题清单**：每个文档的优点、问题分类（严重/改进/轻微）
3. **改进优先级**：按优先级分类的问题列表
4. **最佳实践建议**：文档结构模板和质量建议

报告以 Markdown 格式输出，包含详细的改进建议和可操作的建议。

---

## 最佳实践

### 定期审计

建议的审计频率：

- **每周一次**：快速扫描，识别明显问题
- **每月一次**：全面审计，生成详细报告
- **发布前**：确保所有命令文档质量达标

### 持续改进

- **发现问题立即修复**：不要积累问题
- **参考优秀文档**：学习评分高的文档
- **保持一致性**：遵循统一的文档模板

### 协作维护

- **明确维护者**：每个命令文档应有明确的维护者
- **定期更新**：保持文档与代码同步
- **收集反馈**：根据用户反馈改进文档

---

**最后更新**: 2025-11-30 16:10:35
**维护者**: Documentation Team
**版本**: 1.0.0
