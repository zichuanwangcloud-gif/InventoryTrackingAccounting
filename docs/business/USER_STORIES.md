# 用户故事与验收标准

## 1. 认证与用户管理

### 1.1 用户注册
**用户故事**：作为新用户，我希望能够注册账户，以便开始使用系统。

**验收标准**：
- 用户可以通过邮箱或手机号注册
- 密码必须符合强度要求（至少8位，包含字母和数字）
- 注册成功后自动登录
- 重复邮箱/手机号注册失败

**测试用例**：
- 有效邮箱注册成功
- 无效邮箱格式注册失败
- 弱密码注册失败
- 重复邮箱注册失败

### 1.2 用户登录
**用户故事**：作为已注册用户，我希望能够安全登录系统。

**验收标准**：
- 支持邮箱/手机号 + 密码登录
- 登录成功后获得JWT Token
- 登录失败显示错误信息
- 支持记住登录状态

## 2. 物品管理

### 2.1 创建物品
**用户故事**：作为用户，我希望能够记录购买的物品，包括基本信息、图片和位置。

**验收标准**：
- 必填字段：名称、价格、购买日期
- 可选字段：品牌、尺码、颜色、位置
- 支持上传最多9张图片，单张不超过5MB
- 图片自动压缩和格式转换
- 创建成功后显示在物品列表中

**测试用例**：
- 填写完整信息创建成功
- 必填字段为空创建失败
- 价格为负数创建失败
- 上传超大图片失败
- 上传过多图片失败

### 2.2 物品列表
**用户故事**：作为用户，我希望能够查看所有物品，并支持搜索和筛选。

**验收标准**：
- 显示物品的基本信息（名称、价格、购买日期、状态）
- 支持按名称、品牌搜索
- 支持按品类、状态筛选
- 支持按价格、日期排序
- 支持分页显示
- 移动端优先卡片视图

### 2.3 编辑物品
**用户故事**：作为用户，我希望能够修改物品信息。

**验收标准**：
- 可以修改所有字段
- 修改后立即生效
- 保留修改历史（可选）
- 支持批量编辑

### 2.4 删除物品
**用户故事**：作为用户，我希望能够删除不需要的物品记录。

**验收标准**：
- 删除前二次确认
- 软删除，30天内可恢复
- 删除后相关交易记录保留
- 支持批量删除

## 3. 库存交易

### 3.1 入库操作
**用户故事**：作为用户，我希望能够记录物品的购买入库。

**验收标准**：
- 选择或创建物品
- 记录购买价格和账户
- 自动生成入库交易记录
- 更新物品状态为ACTIVE
- 自动生成记账分录

### 3.2 出库操作
**用户故事**：作为用户，我希望能够记录物品的处置（转售/丢弃/赠与）。

**验收标准**：
- 选择现有物品
- 选择出库类型（转售/丢弃/赠与）
- 转售需记录售出价格和手续费
- 自动计算盈亏
- 更新物品状态为REMOVED
- 自动生成记账分录

### 3.3 交易记录
**用户故事**：作为用户，我希望能够查看所有交易记录。

**验收标准**：
- 显示交易类型、物品、金额、日期
- 支持按时间、类型筛选
- 支持搜索功能
- 显示盈亏情况

## 4. 账户管理

### 4.1 创建账户
**用户故事**：作为用户，我希望能够管理我的资金账户。

**验收标准**：
- 支持现金、银行卡、平台账户
- 账户名称唯一
- 可以设置默认账户
- 支持账户余额显示

### 4.2 账户列表
**用户故事**：作为用户，我希望能够查看所有账户。

**验收标准**：
- 显示账户类型和名称
- 显示账户余额
- 支持编辑和删除
- 按类型分组显示

## 5. 记账功能

### 5.1 自动记账
**用户故事**：作为用户，我希望系统能够自动生成记账分录。

**验收标准**：
- 入库时自动生成：借：存货，贷：现金/银行
- 转售时自动生成：借：现金，贷：存货+收益
- 丢弃时自动生成：借：损失，贷：存货
- 分录金额准确
- 分录日期正确

### 5.2 分录查询
**用户故事**：作为用户，我希望能够查看记账分录。

**验收标准**：
- 显示分录详情（日期、金额、方向、账户、科目）
- 支持按时间、账户筛选
- 支持导出功能
- 显示余额变化

## 6. 报表功能

### 6.1 库存价值报表
**用户故事**：作为用户，我希望了解当前持有的物品价值。

**验收标准**：
- 显示总库存价值
- 按品类分组显示
- 按品牌分组显示
- 支持时间对比
- 图表可视化

### 6.2 处置盈亏报表
**用户故事**：作为用户，我希望了解处置物品的盈亏情况。

**验收标准**：
- 显示总盈亏
- 按时间统计
- 按品类统计
- 显示盈亏趋势
- 支持导出

### 6.3 趋势分析
**用户故事**：作为用户，我希望了解消费和处置的趋势。

**验收标准**：
- 按月显示入库金额
- 按月显示出库金额
- 显示净额变化
- 支持时间范围选择
- 图表展示

## 7. 搜索与筛选

### 7.1 物品搜索
**用户故事**：作为用户，我希望能够快速找到特定物品。

**验收标准**：
- 支持名称、品牌关键字搜索
- 搜索结果高亮显示
- 支持模糊搜索
- 搜索性能良好（<300ms）

### 7.2 高级筛选
**用户故事**：作为用户，我希望能够按多个条件筛选物品。

**验收标准**：
- 支持多条件组合筛选
- 筛选条件可保存
- 支持快速筛选标签
- 筛选结果实时更新

## 8. 移动端适配

### 8.1 响应式设计
**用户故事**：作为移动用户，我希望在手机上也能方便使用系统。

**验收标准**：
- 界面自适应不同屏幕尺寸
- 触摸操作友好
- 加载速度快
- 支持横竖屏切换

### 8.2 拍照上传
**用户故事**：作为用户，我希望能够直接拍照上传物品图片。

**验收标准**：
- 支持相机拍照
- 支持相册选择
- 图片自动压缩
- 上传进度显示

## 9. 性能要求

### 9.1 响应时间
- 页面加载时间 < 2秒
- API响应时间 < 300ms
- 图片上传时间 < 5秒

### 9.2 并发性能
- 支持100个并发用户
- 数据库查询优化
- 缓存策略有效

## 10. 安全要求

### 10.1 数据安全
- 用户数据隔离
- 密码加密存储
- 敏感信息脱敏

### 10.2 操作安全
- 重要操作二次确认
- 操作日志记录
- 异常操作告警
