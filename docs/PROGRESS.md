# 功能进度追踪

> **当前实现基线版本**：V1.0（MVP）
> **总体进度**：约 **65-70%** 完成，**15%** 开发中，**15-20%** 待开始
> **最后更新**：2025-12-19

---

## 状态标记说明

| 状态 | 含义 | 说明 |
|------|------|------|
| ✅ | 已完成 | 功能已实现并通过测试 |
| ⚠️ | 开发中 | 功能正在开发或部分完成 |
| ⏳ | 待开始 | 功能尚未开始开发 |

---

## 模块进度概览

| 模块 | 模块名称 | 完成度 | 状态 |
|------|----------|--------|------|
| M1 | 认证与用户 | 100% | ✅ |
| M2 | 物品管理 | 100% | ✅ |
| M3 | 库存交易 | 100% | ✅ |
| M4 | 账户与记账 | 85% | ✅/⚠️ |
| M5 | 报表 | 85% | ✅/⚠️ |
| M6 | 搜索与筛选 | 50% | ⚠️/⏳ |
| M7 | 文件与图片 | 0% | ⏳ |
| M8 | 设置与映射 | 50% | ⚠️ |
| M9 | 前端Web应用 | 70% | ✅/⚠️ |
| M10 | 基础设施与可观测性 | 75% | ✅/⚠️ |

---

## 详细任务状态

### M1 认证与用户（Auth & User）

| 任务ID | 任务名称 | 状态 | 相关文件 |
|--------|----------|------|----------|
| M1-1 | 基础用户模型与存储 | ✅ | `backend/src/main/java/.../entity/User.java` |
| M1-2 | 基于JWT的登录注册流程 | ✅ | `backend/src/main/java/.../security/`, `api/v1/auth/*` |
| M1-3 | 基于用户的多租户数据隔离 | ✅ | 所有业务表含 `user_id` 字段 |

**验收标准**：
- [x] Flyway启动无报错，`users`表成功创建
- [x] 成功完成注册、登录，返回JWT
- [x] 携带JWT的请求才能访问受保护API
- [x] 不同用户的相同API调用不会互相看见对方数据

---

### M2 物品管理（Item Management）

| 任务ID | 任务名称 | 状态 | 相关文件 |
|--------|----------|------|----------|
| M2-1 | 物品表结构与实体模型 | ✅ | `backend/src/main/java/.../entity/Item.java` |
| M2-2 | 物品CRUD REST API（含软删/回收站） | ✅ | `api/v1/items`, `ItemController.java` |

**验收标准**：
- [x] Flyway迁移成功创建`items`表
- [x] 按PRD校验规则（价格≥0、日期格式、必填字段）
- [x] 支持软删、恢复操作，回收站列表可查询

---

### M3 库存交易（Inventory Transactions）

| 任务ID | 任务名称 | 状态 | 相关文件 |
|--------|----------|------|----------|
| M3-1 | 交易模型与表结构 | ✅ | `inventory_transactions`表 |
| M3-2 | 库存交易写接口（IN/OUT/ADJUST） | ✅ | `api/v1/transactions`, `InventoryService.java` |
| M3-3 | 交易查询与分页 | ✅ | `InventoryTransactionController.java` |

**验收标准**：
- [x] 能支持IN/OUT/ADJUST类型交易
- [x] 幂等保护：重复提交同一幂等键时不产生重复记录
- [x] 性能在测试数据规模下P95 ≤ 300ms

---

### M4 账户与记账（Accounts & Ledger）

| 任务ID | 任务名称 | 状态 | 相关文件 |
|--------|----------|------|----------|
| M4-1 | 账户模型与CRUD | ✅ | `accounts`表, `AccountController.java` |
| M4-2 | 分录模型与映射规则（V1.0默认映射） | ✅ | `ledger_entries`表, `AccountingService.java` |
| M4-3 | 分录查询与汇总接口 | ⚠️ | `LedgerEntryController.java` |

**验收标准**：
- [x] 账户能增删改查
- [x] 入库时生成"借：存货/资产，贷：现金/银行"分录
- [ ] 分录汇总接口完整实现

---

### M5 报表（Reports）

| 任务ID | 任务名称 | 状态 | 相关文件 |
|--------|----------|------|----------|
| M5-1 | 库存价值报表API | ✅ | `ReportService.java`, `api/v1/reports/inventory-value` |
| M5-2 | 处置盈亏报表API | ✅ | `api/v1/reports/profit-loss` |
| M5-3 | 时间趋势报表API | ⚠️ | `api/v1/reports/trends` |

**验收标准**：
- [x] 报表计算口径与PRD描述一致
- [x] 盈亏计算与设计文档中示例一致
- [ ] 时间趋势报表完整实现

---

### M6 搜索与筛选（Search & Filter）

| 任务ID | 任务名称 | 状态 | 相关文件 |
|--------|----------|------|----------|
| M6-1 | 物品搜索与筛选 | ⚠️ | `ItemSearchController.java` |
| M6-2 | 交易搜索与筛选 | ⏳ | `TransactionSearchController.java` |

**验收标准**：
- [ ] 各过滤条件能组合使用
- [ ] 性能达标（避免明显N+1查询）

---

### M7 文件与图片（Files & Images）

| 任务ID | 任务名称 | 状态 | 相关文件 |
|--------|----------|------|----------|
| M7-1 | 图片存储与访问接口（本地文件系统） | ⏳ | 待实现 |

**验收标准**：
- [ ] 图片上传成功并可通过URL访问
- [ ] 超出大小/数量限制时返回合理错误

---

### M8 设置与映射（Settings & Mapping）

| 任务ID | 任务名称 | 状态 | 相关文件 |
|--------|----------|------|----------|
| M8-1 | 内置品类与科目映射初始化 | ⚠️ | `CategoryMappingService.java` |

**验收标准**：
- [ ] 常见品类均有合适的默认科目
- [ ] 报表与分录都能使用该映射

---

### M9 前端Web应用（Frontend SPA）

| 任务ID | 任务名称 | 状态 | 相关文件 |
|--------|----------|------|----------|
| M9-1 | 前端项目初始化与基础布局 | ✅ | `frontend/` (Vue3 + Vite + Pinia) |
| M9-2 | 登录与认证前端流程 | ✅ | `frontend/src/views/Login.vue` |
| M9-3 | 物品列表与详情页 | ⚠️ | `frontend/src/views/Items/` |
| M9-4 | 入库/出库录入与报表仪表盘 | ⚠️ | `frontend/src/views/Dashboard/` |

**验收标准**：
- [x] 前端项目可启动，基础路由可访问
- [x] 正确处理登录成功/失败状态
- [ ] 能完成核心闭环的交互：新增物品 → 入库 → 出库 → 查看报表

---

### M10 基础设施与可观测性（Infra & Observability）

| 任务ID | 任务名称 | 状态 | 相关文件 |
|--------|----------|------|----------|
| M10-1 | Docker化与docker-compose本地环境 | ✅ | `docker-compose.yml`, `Dockerfile` |
| M10-2 | 监控与日志基础配置 | ⚠️ | `application.yml`, Actuator配置 |

**验收标准**：
- [x] `docker-compose up` 后，前端可访问并调用后端API
- [ ] `/actuator/health`与关键健康指标可访问

---

## 里程碑进度

| 里程碑 | 描述 | 目标任务 | 状态 |
|--------|------|----------|------|
| **里程碑1** | 后端基础域模型与认证打底 | M1-1, M1-2, M1-3, M2-1, M3-1, M4-1 | ✅ 已完成 |
| **里程碑2** | 核心业务闭环（入库→出库→分录） | M2-2, M3-2, M4-2, M3-3, M6-1 | ✅ 基本完成 |
| **里程碑3** | 报表与前端MVP | M5-1, M5-2, M9-1~M9-4, M10-1 | ⚠️ 进行中 |
| **里程碑4** | 增强能力与可观测性 | M5-3, M6-2, M7-1, M8-1, M10-2 | ⏳ 待开始 |

---

## 快速查询

### Q: "用户认证做完了吗？"
**A**: ✅ 已完成。包括用户注册、JWT登录、多租户数据隔离。

### Q: "物品管理做完了吗？"
**A**: ✅ 已完成。包括物品CRUD、软删除、回收站。

### Q: "库存交易做完了吗？"
**A**: ✅ 已完成。包括入库、出库（转售/丢弃/赠与）、交易查询。

### Q: "报表功能做完了吗？"
**A**: ⚠️ 大部分完成。库存价值和处置盈亏报表已完成，时间趋势报表开发中。

### Q: "图片上传做完了吗？"
**A**: ⏳ 待开始。计划在V1.1版本实现。

### Q: "前端做完了吗？"
**A**: ⚠️ 70%完成。基础框架、登录、物品列表已完成，报表仪表盘开发中。

---

## 相关文档

- **任务详细拆解**: [docs/project/inventory-tracking-accounting/v1.0/tasks.md](./project/inventory-tracking-accounting/v1.0/tasks.md)
- **PRD版本索引**: [docs/business/PRD_INDEX.md](./business/PRD_INDEX.md)
- **技术路线图**: [docs/technical/TECH_ROADMAP.md](./technical/TECH_ROADMAP.md)
- **API实现状态**: [docs/technical/API_SPECIFICATION.md](./technical/API_SPECIFICATION.md)

---

**文档版本**: V1.0
**维护者**: Documentation Team
**更新频率**: 建议每两周同步一次
